webpackJsonp([1],{"/fWH":function(t,r){},F2mI:function(t,r){},GcMe:function(t,r){},KlB4:function(t,r){},LOge:function(t,r){},NHnr:function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var e=i("kV13"),s=i("4WWC"),n=i("3cXf"),c=i.n(n),a=i("84iU"),o=i.n(a),d={computed:{cartList:function(){return this.$store.state.cartList},productList:function(){return this.$store.state.productList},productDictList:function(){var t={};return this.productList.forEach(function(r){t[r.id]=r}),t},countAll:function(){var t=0;return this.cartList.forEach(function(r){t+=r.count}),t},costAll:function(){var t=this,r=0;return this.cartList.forEach(function(i){r+=t.productDictList[i.id].price*i.count}),r}},methods:{handleCount:function(t,r){r<0&&1===this.cartList[t].count||this.$store.commit("editCartCount",{id:this.cartList[t].id,count:r})},handleDelete:function(t){this.$store.commit("deleteCart",this.cartList[t].id)},handleOrder:function(){var t=new URLSearchParams,r=c()(this.$store.state.cartList);t.append("cart",r),o()({method:"post",url:"/eshop/order/handlerOrder",data:t}),this.$store.commit("emptyCart"),window.alert("下单成功")}}},u={render:function(){var t=this,r=t.$createElement,i=t._self._c||r;return i("div",{staticClass:"cart"},[t._m(0),t._v(" "),i("div",{staticClass:"cart-content"},[t._l(t.cartList,function(r,e){return i("div",{staticClass:"cart-content-main"},[i("div",{staticClass:"cart-info"},[i("img",{attrs:{src:t.productDictList[r.id].pic}}),t._v(" "),i("span",[t._v(t._s(t.productDictList[r.id].name))])]),t._v(" "),i("div",{staticClass:"cart-price"},[t._v("¥ "+t._s(t.productDictList[r.id].price))]),t._v(" "),i("div",{staticClass:"cart-count"},[i("span",{staticClass:"cart-control-minus",on:{click:function(r){return t.handleCount(e,-1)}}},[t._v("-")]),t._v(" "+t._s(r.count)+"\n\t\t\t\t"),i("span",{staticClass:"cart-control-add",on:{click:function(r){return t.handleCount(e,1)}}},[t._v("+")])]),t._v(" "),i("div",{staticClass:"cart-cost"},[t._v("¥ "+t._s(t.productDictList[r.id].price*r.count))]),t._v(" "),i("div",{staticClass:"cart-delete"},[i("span",{staticClass:"cart-control-delete",on:{click:function(r){return t.handleDelete(e)}}},[t._v("删除")])])])}),t._v(" "),t.cartList.length?t._e():i("div",{staticClass:"cart-empty"},[t._v("购物车为空")])],2),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.cartList.length,expression:"cartList.length"}],staticClass:"cart-footer"},[i("div",{staticClass:"cart-footer-desc"},[t._v("\n\t\t\t共计 "),i("span",[t._v(t._s(t.countAll))]),t._v(" 件商品\n\t\t")]),t._v(" "),i("div",{staticClass:"cart-footer-desc"},[t._v("\n\t\t\t应付总额 "),i("span",[t._v("¥ "+t._s(t.costAll))])]),t._v(" "),i("div",{staticClass:"cart-footer-desc"},[i("div",{staticClass:"cart-control-order",on:{click:t.handleOrder}},[t._v("下单")])])])])},staticRenderFns:[function(){var t=this,r=t.$createElement,i=t._self._c||r;return i("div",{staticClass:"cart-header"},[i("div",{staticClass:"cart-header-title"},[t._v("购物清单")]),t._v(" "),i("div",{staticClass:"cart-header-main"},[i("div",{staticClass:"cart-info"},[t._v("商品信息")]),t._v(" "),i("div",{staticClass:"cart-price"},[t._v("单价")]),t._v(" "),i("div",{staticClass:"cart-count"},[t._v("数量")]),t._v(" "),i("div",{staticClass:"cart-cost"},[t._v("小计")]),t._v(" "),i("div",{staticClass:"cart-delete"},[t._v("删除")])])])}]};var l=i("C7Lr")(d,u,!1,function(t){i("LOge")},"data-v-8bb84ae8",null).exports,v=i("IHPB"),f=i.n(v),p={props:{info:Object},methods:{handleCart:function(){this.$store.commit("addCart",this.info.id)}}},h={render:function(){var t=this,r=t.$createElement,i=t._self._c||r;return i("div",{staticClass:"product"},[i("router-link",{staticClass:"product-main",attrs:{to:"/product/"+t.info.id}},[i("img",{attrs:{src:t.info.pic}}),t._v(" "),i("h4",[t._v(t._s(t.info.name))]),t._v(" "),i("div",{staticClass:"product-cost"},[t._v("¥ "+t._s(t.info.price))]),t._v(" "),i("div",{staticClass:"product-add-cart",on:{click:function(r){return r.preventDefault(),t.handleCart(r)}}},[t._v("加入购物车")])])],1)},staticRenderFns:[]};var _={components:{Product:i("C7Lr")(p,h,!1,function(t){i("KlB4")},"data-v-1e60600c",null).exports},computed:{list:function(){return this.$store.state.productList},brands:function(){return this.$store.getters.brands},orderedAndFilteredList:function(){var t=this,r=[].concat(f()(this.list));return""!==this.filterBrand&&(r=r.filter(function(r){return r.brand===t.filterBrand})),""!==this.order&&("price-desc"===this.order?r=r.sort(function(t,r){return r.price-t.price}):"price-asc"===this.order&&(r=r.sort(function(t,r){return t.price-r.price}))),r}},data:function(){return{filterBrand:"",order:""}},methods:{handleFilterBrand:function(t){this.filterBrand===t?this.filterBrand="":this.filterBrand=t},handleOrderDefault:function(){this.order=""},handleOrderCost:function(){"price-desc"===this.order?this.order="price-asc":this.order="price-desc"}},mounted:function(){this.$store.dispatch("getProductList")}},C={render:function(){var t=this,r=t.$createElement,i=t._self._c||r;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.list.length,expression:"list.length"}]},[i("div",{staticClass:"list-control"},[i("div",{staticClass:"list-control-filter"},[i("span",[t._v("品牌：")]),t._v(" "),t._l(t.brands,function(r){return i("span",{staticClass:"list-control-filter-item",class:{on:r===t.filterBrand},on:{click:function(i){return t.handleFilterBrand(r)}}},[t._v(t._s(r))])})],2),t._v(" "),i("div",{staticClass:"list-control-order"},[i("span",[t._v("排序：")]),t._v(" "),i("span",{staticClass:"list-control-order-item",class:{on:""===t.order},on:{click:t.handleOrderDefault}},[t._v("默认")]),t._v(" "),i("span",{staticClass:"list-control-order-item",class:{on:t.order.indexOf("price")>-1},on:{click:t.handleOrderCost}},[t._v("\n                                              价格\n                "),"price-asc"===t.order?[t._v("↑")]:t._e(),t._v(" "),"price-desc"===t.order?[t._v("↓")]:t._e()],2)])]),t._v(" "),t._l(t.orderedAndFilteredList,function(t){return i("Product",{key:t.id,attrs:{info:t}})}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.orderedAndFilteredList.length,expression:"!orderedAndFilteredList.length"}],staticClass:"product-not-found"},[t._v("暂无相关商品")])],2)},staticRenderFns:[]};var m={data:function(){return{id:parseInt(this.$route.params.id),product:null}},methods:{getProduct:function(){var t=this;o.a.get("/eshop/product/getProductById/"+this.id).then(function(r){t.product=r.data})},handleAddToCart:function(){this.$store.commit("addCart",this.id)}},mounted:function(){this.getProduct()}},L={render:function(){var t=this,r=t.$createElement,i=t._self._c||r;return t.product?i("div",[i("div",{staticClass:"product"},[i("div",{staticClass:"product-image"},[i("img",{attrs:{src:t.product.pic}})]),t._v(" "),i("div",{staticClass:"product-info"},[i("h1",{staticClass:"product-name"},[t._v(t._s(t.product.name))]),t._v(" "),i("div",{staticClass:"product-cost"},[t._v("¥ "+t._s(t.product.price))]),t._v(" "),i("div",{staticClass:"product-add-cart",on:{click:t.handleAddToCart}},[t._v("加入购物车")])])]),t._v(" "),i("div",{staticClass:"product-desc"},[i("h2",[t._v("产品介绍")]),t._v("\n\t\t"+t._s(t.product.intro)+"\n\t")])]):t._e()},staticRenderFns:[]};var g=[{path:"/list",meta:{title:"商品列表"},component:i("C7Lr")(_,C,!1,function(t){i("/fWH")},"data-v-7abbc8d6",null).exports},{path:"/product/:id",meta:{title:"商品详情"},component:i("C7Lr")(m,L,!1,function(t){i("F2mI")},"data-v-2db7ce30",null).exports},{path:"/cart",meta:{title:"购物车"},component:l},{path:"*",redirect:"/list"}],w=i("kciL"),$={render:function(){var t=this,r=t.$createElement,i=t._self._c||r;return i("div",[i("div",{staticClass:"header"},[i("router-link",{staticClass:"header-title",attrs:{to:"/list"}},[t._v("电商网站")]),t._v(" "),i("div",{staticClass:"header-menu"},[i("router-link",{staticClass:"header-menu-cart",attrs:{to:"/cart"}},[t._v("\n                购物车\n                "),t.cartList.length?i("span",[t._v(t._s(t.cartList.length))]):t._e()])],1)],1),t._v(" "),i("router-view")],1)},staticRenderFns:[]},k=i("C7Lr")({computed:{cartList:function(){return this.$store.state.cartList}}},$,!1,null,null,null).exports;i("GcMe");e.a.use(s.a),e.a.use(w.a);var b={mode:"history",routes:g},B=new s.a(b);B.beforeEach(function(t,r,i){window.document.title=t.meta.title,i()}),B.afterEach(function(t,r,i){window.scrollTo(0,0)});var F=new w.a.Store({state:{productList:[],cartList:[]},getters:{brands:function(t){var r=t.productList.map(function(t){return t.brand});return function(t){for(var r=[],i={},e=0;e<t.length;e++){var s=t[e];i[s]||(r.push(s),i[s]=1)}return r}(r)}},mutations:{setProductList:function(t,r){t.productList=r},addCart:function(t,r){var i=t.cartList.find(function(t){return t.id===r});i?i.count++:t.cartList.push({id:r,count:1})},editCartCount:function(t,r){t.cartList.find(function(t){return t.id===r.id}).count+=r.count},deleteCart:function(t,r){var i=t.cartList.findIndex(function(t){return t.id===r});t.cartList.splice(i,1)},emptyCart:function(t){t.cartList=[]}},actions:{getProductList:function(t){o.a.get("/eshop/product/getProduct").then(function(r){t.commit("setProductList",r.data)})}}});new e.a({el:"#app",router:B,store:F,render:function(t){return t(k)}})}},["NHnr"]);
//# sourceMappingURL=app.2fd7f0907b43645f3cda.js.map